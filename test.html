<script src="rx.js"></script>
<script type="text/javascript">

    //    var numbers = Rx.Observable.interval(1000).take(5);
    //    numbers.subscribe(x => console.log(x));
    function init() {
        var webSocket = Rx.Observable.webSocket({
            url: 'ws://bogazici1.hivecdn.fmdev:10000/socket/ws',
            closingObserver: {
                next: function (x) {
                    console.log("closingObserver", x)
                }
            },
            closeObserver: {
                next: function (x) {
                    console.log("closeObserver", x)
                }
            },
            openObserver: {
                next: function (x) {
                    console.log("openObserver", x)

                }
            }

        }).catch(function (err) {
            console.log("err-> ", err)
        })
            .retry(3)
            .do(function (x) {
                console.log("socket", x)
            })
            .share();
        setInterval(function () {
            webSocket.next(1)
        }, 2000)
        console.log(webSocket)
    }

    init();


</script>
